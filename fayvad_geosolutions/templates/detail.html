{% extends 'base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}
{% block meta_description %}{{ meta_description }}{% endblock %}

{% block extra_css %}
<style>
    .service-hero {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: white;
        padding: 120px 0 80px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    
    .service-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 400"><rect fill="%23f0f8ff" width="1200" height="400"/><circle fill="%23e6f3ff" cx="200" cy="150" r="80" opacity="0.3"/><circle fill="%23cce7ff" cx="800" cy="200" r="100" opacity="0.2"/></svg>');
        opacity: 0.1;
    }
    
    .service-icon-large {
        font-size: 4rem;
        margin-bottom: 1.5rem;
        color: #ffd700;
    }
    
    .hero-subtitle {
        font-size: 1.25rem;
        opacity: 0.9;
        margin-bottom: 2rem;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .service-meta {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .meta-item {
        text-align: center;
        padding: 1.5rem;
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
        backdrop-filter: blur(10px);
    }
    
    .meta-label {
        font-size: 0.9rem;
        opacity: 0.8;
        margin-bottom: 0.5rem;
    }
    
    .meta-value {
        font-weight: bold;
        color: #ffd700;
        font-size: 1.1rem;
    }
    
    .cta-buttons {
        margin-top: 2rem;
    }
    
    .cta-buttons .btn {
        margin: 0 0.5rem;
        padding: 12px 30px;
        font-weight: 600;
    }
    
    .section {
        padding: 60px 0;
    }
    
    .section-title {
        text-align: center;
        margin-bottom: 3rem;
        color: #1e3c72;
        font-size: 2.5rem;
        font-weight: 700;
    }
    
    .bg-light {
        background-color: #f8f9fa;
    }
    
    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }
    
    .feature-card {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        border-left: 4px solid #ffd700;
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    }
    
    .feature-icon {
        font-size: 2rem;
        color: #1e3c72;
        margin-bottom: 1rem;
        display: block;
    }
    
    .feature-card h4 {
        color: #1e3c72;
        margin-bottom: 1rem;
        font-size: 1.3rem;
    }
    
    .feature-card p {
        color: #666;
        line-height: 1.6;
    }
    
    .benefits-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
    }
    
    .benefit-card {
        background: white;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }
    
    .benefit-card:hover {
        transform: translateY(-3px);
    }
    
    .benefit-icon {
        font-size: 1.5rem;
        color: #ffd700;
        margin-bottom: 1rem;
    }
    
    .faq-section {
        max-width: 800px;
        margin: 0 auto;
    }
    
    .faq-item {
        margin-bottom: 1rem;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .faq-question {
        background: #f8f9fa;
        padding: 1.5rem;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background 0.3s ease;
        border: none;
        width: 100%;
        text-align: left;
    }
    
    .faq-question:hover {
        background: #e9ecef;
    }
    
    .faq-question.active {
        background: #1e3c72;
        color: white;
    }
    
    .faq-question h5 {
        margin: 0;
        font-size: 1.1rem;
    }
    
    .faq-toggle {
        font-size: 1.5rem;
        font-weight: bold;
        transition: transform 0.3s ease;
    }
    
    .faq-question.active .faq-toggle {
        transform: rotate(45deg);
    }
    
    .faq-answer {
        display: none;
        padding: 1.5rem;
        background: white;
        line-height: 1.6;
    }
    
    .faq-answer.active {
        display: block;
    }
    
    .case-studies-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }
    
    .case-study-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }
    
    .case-study-card:hover {
        transform: translateY(-5px);
    }
    
    .case-study-content {
        padding: 2rem;
    }
    
    .case-study-card h4 {
        color: #1e3c72;
        margin-bottom: 1rem;
    }
    
    .case-study-meta {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 1rem;
    }
    
    .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }
    
    .testimonial-card {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        position: relative;
    }
    
    .testimonial-content {
        margin-bottom: 1.5rem;
        font-style: italic;
        line-height: 1.6;
    }
    
    .testimonial-author {
        color: #1e3c72;
        font-weight: 600;
    }
    
    .testimonial-title {
        color: #666;
        font-size: 0.9rem;
    }
    
    .rating {
        color: #ffd700;
        margin-bottom: 1rem;
    }
    
    .inquiry-form {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        margin-top: 2rem;
    }
    
    .related-services {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }
    
    .related-service-card {
        background: #f8f9fa;
        padding: 2rem;
        border-radius: 15px;
        text-align: center;
        transition: all 0.3s ease;
        border-top: 4px solid #ffd700;
        text-decoration: none;
        color: inherit;
    }
    
    .related-service-card:hover {
        transform: translateY(-5px);
        background: white;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        text-decoration: none;
        color: inherit;
    }
    
    .related-service-card .service-icon {
        font-size: 2.5rem;
        color: #1e3c72;
        margin-bottom: 1rem;
    }
    
    .related-service-card h4 {
        color: #1e3c72;
        margin-bottom: 1rem;
    }
    
    @media (max-width: 768px) {
        .service-hero {
            padding: 80px 0 60px;
        }
        
        .service-icon-large {
            font-size: 3rem;
        }
        
        .service-meta {
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        .features-grid,
        .benefits-grid,
        .case-studies-grid,
        .testimonials-grid,
        .related-services {
            grid-template-columns: 1fr;
        }
        
        .cta-buttons .btn {
            display: block;
            margin: 0.5rem 0;
            width: 100%;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Service Hero -->
<section class="service-hero">
    <div class="container">
        <div class="service-icon-large">{{ service.icon|default:"üó∫Ô∏è" }}</div>
        <h1>{{ service.name }}</h1>
        <p class="hero-subtitle">{{ service.short_description }}</p>
        
        <div class="service-meta">
            {% if service.price_range %}
            <div class="meta-item">
                <div class="meta-label">Investment Range</div>
                <div class="meta-value">{{ service.price_range }}</div>
            </div>
            {% endif %}
            
            {% if service.duration_range %}
            <div class="meta-item">
                <div class="meta-label">Timeline</div>
                <div class="meta-value">{{ service.duration_range }}</div>
            </div>
            {% endif %}
            
            <div class="meta-item">
                <div class="meta-label">Priority Level</div>
                <div class="meta-value">{{ service.get_priority_display }}</div>
            </div>
        </div>
        
        <div class="cta-buttons">
            <a href="#inquiry" class="btn btn-secondary">Get Quote</a>
            <a href="{% url 'core:contact' %}" class="btn btn-outline">Contact Us</a>
        </div>
    </div>
</section>

<!-- Service Overview -->
<section class="section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h2 class="section-title">Service Overview</h2>
                <div class="lead">{{ service.overview|linebreaks }}</div>
                
                {% if service.detailed_description %}
                <div class="mt-4">
                    {{ service.detailed_description|linebreaks }}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Key Features -->
{% if service.features.exists %}
<section class="section bg-light">
    <div class="container">
        <h2 class="section-title">Key Features</h2>
        <div class="features-grid">
            {% for feature in service.features.all %}
            <div class="feature-card">
                {% if feature.icon %}
                <div class="feature-icon">{{ feature.icon }}</div>
                {% else %}
                <div class="feature-icon">‚úì</div>
                {% endif %}
                <h4>{{ feature.title }}</h4>
                <p>{{ feature.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Benefits -->
{% if service.benefits.exists %}
<section class="section">
    <div class="container">
        <h2 class="section-title">Why Choose This Service</h2>
        <div class="benefits-grid">
            {% for benefit in service.benefits.all %}
            <div class="benefit-card">
                {% if benefit.icon %}
                <div class="benefit-icon">{{ benefit.icon }}</div>
                {% else %}
                <div class="benefit-icon">‚òÖ</div>
                {% endif %}
                <h5>{{ benefit.title }}</h5>
                <p>{{ benefit.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Case Studies -->
{% if case_studies %}
<section class="section bg-light">
    <div class="container">
        <h2 class="section-title">Case Studies</h2>
        <div class="case-studies-grid">
            {% for case_study in case_studies %}
            <div class="case-study-card">
                <div class="case-study-content">
                    <h4>{{ case_study.title }}</h4>
                    <div class="case-study-meta">
                        <strong>Client:</strong> {{ case_study.client }} | 
                        <strong>Duration:</strong> {{ case_study.project_duration }}
                    </div>
                    <p><strong>Challenge:</strong> {{ case_study.challenge|truncatewords:20 }}</p>
                    <p><strong>Results:</strong> {{ case_study.results|truncatewords:20 }}</p>
                    <a href="{{ case_study.get_absolute_url }}" class="btn btn-sm btn-outline">Read Full Case Study</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Testimonials -->
{% if testimonials %}
<section class="section">
    <div class="container">
        <h2 class="section-title">What Our Clients Say</h2>
        <div class="testimonials-grid">
            {% for testimonial in testimonials %}
            <div class="testimonial-card">
                <div class="rating">
                    {% for i in "12345" %}
                        {% if forloop.counter <= testimonial.rating %}‚òÖ{% else %}‚òÜ{% endif %}
                    {% endfor %}
                </div>
                <div class="testimonial-content">
                    "{{ testimonial.content }}"
                </div>
                <div class="testimonial-author">{{ testimonial.client_name }}</div>
                <div class="testimonial-title">{{ testimonial.client_title }}, {{ testimonial.client_organization }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- FAQ -->
{% if service.faqs.exists %}
<section class="section bg-light">
    <div class="container">
        <h2 class="section-title">Frequently Asked Questions</h2>
        <div class="faq-section">
            {% for faq in service.faqs.all %}
            <div class="faq-item">
                <button class="faq-question" type="button">
                    <h5>{{ faq.question }}</h5>
                    <span class="faq-toggle">+</span>
                </button>
                <div class="faq-answer">
                    {{ faq.answer|linebreaks }}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Service Inquiry Form -->
<section class="section" id="inquiry">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h2 class="section-title">Get a Quote</h2>
                <div class="inquiry-form">
                    <form method="post">
                        {% csrf_token %}
                        {{ inquiry_form.as_p }}
                        <button type="submit" class="btn btn-primary btn-lg">Submit Inquiry</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Services -->
{% if related_services %}
<section class="section bg-light">
    <div class="container">
        <h2 class="section-title">Related Services</h2>
        <div class="related-services">
            {% for related_service in related_services %}
            <a href="{{ related_service.get_absolute_url }}" class="related-service-card">
                <div class="service-icon">{{ related_service.icon|default:"üîß" }}</div>
                <h4>{{ related_service.name }}</h4>
                <p>{{ related_service.short_description|truncatewords:15 }}</p>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // FAQ toggle functionality
    const faqQuestions = document.querySelectorAll('.faq-question');
    
    faqQuestions.forEach(question => {
        question.addEventListener('click', function() {
            const answer = this.nextElementSibling;
            const isActive = this.classList.contains('active');
            
            // Close all FAQs
            faqQuestions.forEach(q => {
                q.classList.remove('active');
                q.nextElementSibling.classList.remove('active');
            });
            
            // Open clicked FAQ if it wasn't active
            if (!isActive) {
                this.classList.add('active');
                answer.classList.add('active');
            }
        });
    });
    
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
</script>
{% endblock %}